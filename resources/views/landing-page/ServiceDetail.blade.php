@extends('landing-page.layouts.default')

@section('before_head')
<link rel="preconnect" href="https://fonts.googleapis.com">
<!-- <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> -->
<link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">



<link href="{{ asset('vendor/star-rating/rateit.css') }}" rel="stylesheet">

@endsection

@section('content')
@php
    $serviceData = json_decode($service->content(), true);
    $sitesetup = App\Models\Setting::where('type','site-setup')->where('key', 'site-setup')->first();
    $date_time = json_decode($sitesetup->value);
@endphp

<div class="container service-detail-main-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <ol class="breadcrumb custom-breadcrums">
                <li>
                    <a href="/"> Accueil </a>
                </li>
                <svg width="7" height="10" viewBox="0 0 7 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6.50448 5.32157L0.94892 9.8668C0.897303 9.90903 0.836025 9.94253 0.768585 9.96538C0.701144 9.98824 0.628862 10 0.555864 10C0.482867 10 0.410585 9.98824 0.343144 9.96538C0.275704 9.94253 0.214425 9.90903 0.162809 9.8668C0.111192 9.82457 0.0702472 9.77444 0.0423124 9.71926C0.0143776 9.66408 0 9.60495 0 9.54522C0 9.4855 0.0143776 9.42636 0.0423124 9.37119C0.0702472 9.31601 0.111192 9.26588 0.162809 9.22365L5.326 5L0.162809 0.77635C0.0585638 0.691063 -1.0984e-09 0.575389 0 0.454775C1.0984e-09 0.334161 0.0585638 0.218487 0.162809 0.133201C0.267053 0.0479136 0.40844 8.98644e-10 0.555864 0C0.703289 -8.98644e-10 0.844675 0.0479136 0.94892 0.133201L6.50448 4.67842C6.55613 4.72064 6.59711 4.77077 6.62506 4.82594C6.65302 4.88112 6.66741 4.94027 6.66741 5C6.66741 5.05973 6.65302 5.11888 6.62506 5.17405C6.59711 5.22923 6.55613 5.27936 6.50448 5.32157Z" fill="#202020"/>
                </svg>
                <li>
                    <a href="/service-list"> Services </a>
                </li>
                <svg width="7" height="10" viewBox="0 0 7 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6.50448 5.32157L0.94892 9.8668C0.897303 9.90903 0.836025 9.94253 0.768585 9.96538C0.701144 9.98824 0.628862 10 0.555864 10C0.482867 10 0.410585 9.98824 0.343144 9.96538C0.275704 9.94253 0.214425 9.90903 0.162809 9.8668C0.111192 9.82457 0.0702472 9.77444 0.0423124 9.71926C0.0143776 9.66408 0 9.60495 0 9.54522C0 9.4855 0.0143776 9.42636 0.0423124 9.37119C0.0702472 9.31601 0.111192 9.26588 0.162809 9.22365L5.326 5L0.162809 0.77635C0.0585638 0.691063 -1.0984e-09 0.575389 0 0.454775C1.0984e-09 0.334161 0.0585638 0.218487 0.162809 0.133201C0.267053 0.0479136 0.40844 8.98644e-10 0.555864 0C0.703289 -8.98644e-10 0.844675 0.0479136 0.94892 0.133201L6.50448 4.67842C6.55613 4.72064 6.59711 4.77077 6.62506 4.82594C6.65302 4.88112 6.66741 4.94027 6.66741 5C6.66741 5.05973 6.65302 5.11888 6.62506 5.17405C6.59711 5.22923 6.55613 5.27936 6.50448 5.32157Z" fill="#202020"/>
                </svg>
                <li class="active">
                    <a href="#">
                        Consultations professionnelles
                    </a>
                </li>
            </ol>
        </div>
    </div>
    <div class="row service-detail-metadata">
        <div class="col-md-6 pl-0 service-metadata-media">
            <div class="service-metadata-media-slider">
                @if(!empty($serviceData['service_detail']['attchments']))
                    <section-thumbnail-section :attachments="{{ json_encode($serviceData['service_detail']['attchments']) }}"></section-thumbnail-section>
                @else
                    <img src="{{ asset('images/default.png') }}" alt="" class="img-fluid object-cover rounded-3 mt-4 w-100"/>
                @endif
            </div>
        </div>
        <div class="col-md-6 pr-0 service-metadata-info">
            <span class="service-category">
                <span>
                    @php
                        $category = App\Models\Category::find($serviceData['service_detail']['category_id']);
                        $subCategory = App\Models\SubCategory::find($serviceData['service_detail']['subcategory_id']);
                    @endphp
                    {{$category->name}}
                </span>
            </span>
            <p class="mb-0 service-detail-title">
                {{ $serviceData['service_detail']['name'] }}
            </p>
            @if(!empty($serviceData['service_detail']['description']))
                <div class="service_detail-description">
                    <!-- <p class="m-0"> -->
                        <p class="m-0 readmore-text">
                            {{ $serviceData['service_detail']['description'] }}
                        </p>
                        <a href="javascript:void(0);" class="readmore-btn">{{__('landingpage.read_more')}}</a>

                    <!-- </p> -->
                </div>
            @endif

            <p class="service_duration_location_section">
                @if(!empty($serviceData['service_detail']['duration']))
                <span>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 3.125C8.51664 3.125 7.0666 3.56487 5.83323 4.38898C4.59986 5.21309 3.63856 6.38443 3.07091 7.75487C2.50325 9.12532 2.35472 10.6333 2.64411 12.0882C2.9335 13.543 3.64781 14.8794 4.6967 15.9283C5.7456 16.9772 7.08197 17.6915 8.53683 17.9809C9.99168 18.2703 11.4997 18.1218 12.8701 17.5541C14.2406 16.9864 15.4119 16.0251 16.236 14.7918C17.0601 13.5584 17.5 12.1084 17.5 10.625C17.4977 8.63657 16.7068 6.73024 15.3008 5.32421C13.8948 3.91818 11.9884 3.12727 10 3.125ZM13.5672 7.94219L10.4422 11.0672C10.3841 11.1253 10.3152 11.1713 10.2393 11.2027C10.1634 11.2342 10.0821 11.2503 10 11.2503C9.91788 11.2503 9.83656 11.2342 9.76069 11.2027C9.68482 11.1713 9.61588 11.1253 9.55782 11.0672C9.49975 11.0091 9.45368 10.9402 9.42226 10.8643C9.39083 10.7884 9.37466 10.7071 9.37466 10.625C9.37466 10.5429 9.39083 10.4616 9.42226 10.3857C9.45368 10.3098 9.49975 10.2409 9.55782 10.1828L12.6828 7.05781C12.7409 6.99974 12.8098 6.95368 12.8857 6.92225C12.9616 6.89083 13.0429 6.87465 13.125 6.87465C13.2071 6.87465 13.2884 6.89083 13.3643 6.92225C13.4402 6.95368 13.5091 6.99974 13.5672 7.05781C13.6253 7.11588 13.6713 7.18482 13.7027 7.26069C13.7342 7.33656 13.7504 7.41788 13.7504 7.5C13.7504 7.58212 13.7342 7.66344 13.7027 7.73931C13.6713 7.81518 13.6253 7.88412 13.5672 7.94219ZM7.5 1.25C7.5 1.08424 7.56585 0.925268 7.68306 0.808058C7.80027 0.690848 7.95924 0.625 8.125 0.625H11.875C12.0408 0.625 12.1997 0.690848 12.3169 0.808058C12.4342 0.925268 12.5 1.08424 12.5 1.25C12.5 1.41576 12.4342 1.57473 12.3169 1.69194C12.1997 1.80915 12.0408 1.875 11.875 1.875H8.125C7.95924 1.875 7.80027 1.80915 7.68306 1.69194C7.56585 1.57473 7.5 1.41576 7.5 1.25Z" fill="black"/>
                    </svg>
                    
                        <span class="duration-text">
                        @php
                            $durationParts = explode(':', $serviceData['service_detail']['duration']);
                            $hours = intval($durationParts[0]);
                            $minutes = intval($durationParts[1]);
                        @endphp
                        @if($hours > 0)
                            {{ $hours }} hrs @if($minutes > 0) {{ $minutes }} min @endif
                        @else
                            {{ $minutes }} min
                        @endif
                        </span>
                </span>
                    @endif

                <span>
                    <svg width="14" height="18" viewBox="0 0 14 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7 0.25C5.17727 0.252068 3.42979 0.97706 2.14092 2.26592C0.85206 3.55479 0.127068 5.30227 0.125 7.125C0.125 13.0078 6.375 17.4508 6.64141 17.6367C6.74649 17.7103 6.87169 17.7498 7 17.7498C7.12831 17.7498 7.25351 17.7103 7.35859 17.6367C7.625 17.4508 13.875 13.0078 13.875 7.125C13.8729 5.30227 13.1479 3.55479 11.8591 2.26592C10.5702 0.97706 8.82273 0.252068 7 0.25ZM7 4.625C7.49445 4.625 7.9778 4.77162 8.38893 5.04633C8.80005 5.32103 9.12048 5.71148 9.3097 6.16829C9.49892 6.62511 9.54843 7.12777 9.45196 7.61273C9.3555 8.09768 9.1174 8.54314 8.76777 8.89277C8.41814 9.2424 7.97268 9.4805 7.48773 9.57696C7.00277 9.67343 6.50011 9.62392 6.04329 9.4347C5.58648 9.24548 5.19603 8.92505 4.92133 8.51393C4.64662 8.1028 4.5 7.61945 4.5 7.125C4.5 6.46196 4.76339 5.82607 5.23223 5.35723C5.70107 4.88839 6.33696 4.625 7 4.625Z" fill="black"/>
                    </svg>
                    <span class="location-text">
                        Montr√©al
                    </span>
                </span>
            </p>

            <p class="service_price_rating_section d-flex justify-content-between">
                @if($serviceData['service_detail']['price']==0)
                    <span class="price-text">Free</span>
                @else
                    <span class="price-text">
                        {{ getPriceFormat($serviceData['service_detail']['price']) }}/
                        <span class="session-text">
                            &nbsp;{{__('landingpage.per_session')}}
                        </span>
                    </span>
                @endif

                <span class="rating-review-section">
                    @if($serviceData['service_detail']['total_rating'] > 0 && $serviceData['service_detail']['total_review'] > 0)
                    <span class="star-rating-count">
                        {{ round($serviceData['service_detail']['total_rating'],1) }}
                    </span>
        
                    <span class="rateit-demo bigstars" data-rateit-value="{{ round($serviceData['service_detail']['total_rating'],1) }}"></span>
                    <span class="text-body">
                        <a href="{{route('rating.all', ['service_id' => $serviceData['service_detail']['id']])}}">
                            ({{ $serviceData['service_detail']['total_review'] }} {{__('messages.reviews')}})
                        </a>
                    </span>

                    @endif
                </span>

            </p>

            <div class="service-continue-button-section">
                @if(auth()->check() && auth()->user()->user_type == 'user')
                    <a href="{{ route('book.service', ['id' => $serviceData['service_detail']['id']]) }}" class="btn btn-primary w-100 continue-button">{{__('messages.continue')}}</a>
                @else
                    <a href="{{ route('user.login',['service_id' =>$serviceData['service_detail']['id']]) }}" class="btn btn-primary w-100">{{__('messages.continue')}}</a>
                @endif
            </div>

            <div class="section-divider"></div>
            
            @if($serviceData['service_detail']['is_slot'] == 1)
                <div class="availability-days-section">
                    <p class="availability-days-title">
                        <svg width="23" height="24" viewBox="0 0 23 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20.3077 1.84615H17.5385V0.923077C17.5385 0.678262 17.4412 0.443473 17.2681 0.270363C17.095 0.0972524 16.8602 0 16.6154 0C16.3706 0 16.1358 0.0972524 15.9627 0.270363C15.7896 0.443473 15.6923 0.678262 15.6923 0.923077V1.84615H6.46154V0.923077C6.46154 0.678262 6.36429 0.443473 6.19118 0.270363C6.01806 0.0972524 5.78328 0 5.53846 0C5.29365 0 5.05886 0.0972524 4.88575 0.270363C4.71264 0.443473 4.61538 0.678262 4.61538 0.923077V1.84615H1.84615C1.35652 1.84615 0.886947 2.04066 0.540726 2.38688C0.194505 2.7331 0 3.20268 0 3.69231V22.1538C0 22.6435 0.194505 23.1131 0.540726 23.4593C0.886947 23.8055 1.35652 24 1.84615 24H20.3077C20.7973 24 21.2669 23.8055 21.6131 23.4593C21.9593 23.1131 22.1538 22.6435 22.1538 22.1538V3.69231C22.1538 3.20268 21.9593 2.7331 21.6131 2.38688C21.2669 2.04066 20.7973 1.84615 20.3077 1.84615ZM6 19.3846C5.72615 19.3846 5.45845 19.3034 5.23075 19.1513C5.00305 18.9991 4.82558 18.7829 4.72078 18.5299C4.61598 18.2769 4.58856 17.9985 4.64199 17.7299C4.69542 17.4613 4.82729 17.2146 5.02093 17.0209C5.21457 16.8273 5.46129 16.6954 5.72987 16.642C5.99846 16.5886 6.27686 16.616 6.52987 16.7208C6.78287 16.8256 6.99912 17.003 7.15127 17.2307C7.30341 17.4584 7.38462 17.7261 7.38462 18C7.38462 18.3672 7.23874 18.7194 6.97907 18.9791C6.71941 19.2387 6.36722 19.3846 6 19.3846ZM11.0769 19.3846C10.8031 19.3846 10.5354 19.3034 10.3077 19.1513C10.08 18.9991 9.9025 18.7829 9.79771 18.5299C9.69291 18.2769 9.66549 17.9985 9.71891 17.7299C9.77234 17.4613 9.90421 17.2146 10.0979 17.0209C10.2915 16.8273 10.5382 16.6954 10.8068 16.642C11.0754 16.5886 11.3538 16.616 11.6068 16.7208C11.8598 16.8256 12.076 17.003 12.2282 17.2307C12.3803 17.4584 12.4615 17.7261 12.4615 18C12.4615 18.3672 12.3157 18.7194 12.056 18.9791C11.7963 19.2387 11.4441 19.3846 11.0769 19.3846ZM11.0769 14.7692C10.8031 14.7692 10.5354 14.688 10.3077 14.5359C10.08 14.3837 9.9025 14.1675 9.79771 13.9145C9.69291 13.6615 9.66549 13.3831 9.71891 13.1145C9.77234 12.8459 9.90421 12.5992 10.0979 12.4055C10.2915 12.2119 10.5382 12.08 10.8068 12.0266C11.0754 11.9732 11.3538 12.0006 11.6068 12.1054C11.8598 12.2102 12.076 12.3877 12.2282 12.6154C12.3803 12.8431 12.4615 13.1108 12.4615 13.3846C12.4615 13.7518 12.3157 14.104 12.056 14.3637C11.7963 14.6234 11.4441 14.7692 11.0769 14.7692ZM16.1538 19.3846C15.88 19.3846 15.6123 19.3034 15.3846 19.1513C15.1569 18.9991 14.9794 18.7829 14.8746 18.5299C14.7698 18.2769 14.7424 17.9985 14.7958 17.7299C14.8493 17.4613 14.9811 17.2146 15.1748 17.0209C15.3684 16.8273 15.6151 16.6954 15.8837 16.642C16.1523 16.5886 16.4307 16.616 16.6837 16.7208C16.9367 16.8256 17.153 17.003 17.3051 17.2307C17.4573 17.4584 17.5385 17.7261 17.5385 18C17.5385 18.3672 17.3926 18.7194 17.1329 18.9791C16.8733 19.2387 16.5211 19.3846 16.1538 19.3846ZM16.1538 14.7692C15.88 14.7692 15.6123 14.688 15.3846 14.5359C15.1569 14.3837 14.9794 14.1675 14.8746 13.9145C14.7698 13.6615 14.7424 13.3831 14.7958 13.1145C14.8493 12.8459 14.9811 12.5992 15.1748 12.4055C15.3684 12.2119 15.6151 12.08 15.8837 12.0266C16.1523 11.9732 16.4307 12.0006 16.6837 12.1054C16.9367 12.2102 17.153 12.3877 17.3051 12.6154C17.4573 12.8431 17.5385 13.1108 17.5385 13.3846C17.5385 13.7518 17.3926 14.104 17.1329 14.3637C16.8733 14.6234 16.5211 14.7692 16.1538 14.7692ZM20.3077 7.38462H1.84615V3.69231H4.61538V4.61538C4.61538 4.8602 4.71264 5.09499 4.88575 5.2681C5.05886 5.44121 5.29365 5.53846 5.53846 5.53846C5.78328 5.53846 6.01806 5.44121 6.19118 5.2681C6.36429 5.09499 6.46154 4.8602 6.46154 4.61538V3.69231H15.6923V4.61538C15.6923 4.8602 15.7896 5.09499 15.9627 5.2681C16.1358 5.44121 16.3706 5.53846 16.6154 5.53846C16.8602 5.53846 17.095 5.44121 17.2681 5.2681C17.4412 5.09499 17.5385 4.8602 17.5385 4.61538V3.69231H20.3077V7.38462Z" fill="black"/>
                        </svg>
                        <span>
                            {{__('landingpage.available_days')}}
                        </span>
                    </p>
                    <p class="availability-days-description">
                        {{__('landingpage.ut_enim_ad_minim_veniam_quis_nostrud_exercitation_ullamco_laboris_nisi_ut_aliquip')}}
                    </p>
                    <ul class="list-inline m-0 p-0 d-flex align-items-center gap-2 flex-wrap">
                        @foreach($serviceData['service_detail']['slots'] as $slots)
                        <li class="day-name">
                            <span class="btn btn-sm btn-outline-primary text-capitalize cursor-default">{{ $slots['day'] }}</span>
                        </li>
                        @endforeach
                    </ul>
                </div>
            <div class="section-divider"></div>

            @endif


            @php
                $total_ratings = App\Models\BookingRating::where('service_id',$serviceData['service_detail']['id'])->get();
            @endphp
            @if($total_ratings->isNotEmpty())
                <div class="service-reviews-section">
                    <p class="service-reviews-section-title">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 0C8.81847 0.00349392 5.76826 1.2689 3.51858 3.51858C1.2689 5.76826 0.00349392 8.81847 0 12V22.08C0 22.5892 0.202285 23.0776 0.562355 23.4376C0.922425 23.7977 1.41078 24 1.92 24H12C15.1826 24 18.2348 22.7357 20.4853 20.4853C22.7357 18.2348 24 15.1826 24 12C24 8.8174 22.7357 5.76515 20.4853 3.51472C18.2348 1.26428 15.1826 0 12 0ZM6.72 13.92C6.43519 13.92 6.15679 13.8355 5.91998 13.6773C5.68317 13.5191 5.4986 13.2942 5.38961 13.0311C5.28062 12.7679 5.25211 12.4784 5.30767 12.1991C5.36323 11.9197 5.50038 11.6632 5.70177 11.4618C5.90315 11.2604 6.15974 11.1232 6.43907 11.0677C6.7184 11.0121 7.00794 11.0406 7.27106 11.1496C7.53419 11.2586 7.75909 11.4432 7.91732 11.68C8.07555 11.9168 8.16 12.1952 8.16 12.48C8.16 12.8619 8.00829 13.2282 7.73823 13.4982C7.46818 13.7683 7.10191 13.92 6.72 13.92ZM12 13.92C11.7152 13.92 11.4368 13.8355 11.2 13.6773C10.9632 13.5191 10.7786 13.2942 10.6696 13.0311C10.5606 12.7679 10.5321 12.4784 10.5877 12.1991C10.6432 11.9197 10.7804 11.6632 10.9818 11.4618C11.1832 11.2604 11.4397 11.1232 11.7191 11.0677C11.9984 11.0121 12.2879 11.0406 12.5511 11.1496C12.8142 11.2586 13.0391 11.4432 13.1973 11.68C13.3555 11.9168 13.44 12.1952 13.44 12.48C13.44 12.8619 13.2883 13.2282 13.0182 13.4982C12.7482 13.7683 12.3819 13.92 12 13.92ZM17.28 13.92C16.9952 13.92 16.7168 13.8355 16.48 13.6773C16.2432 13.5191 16.0586 13.2942 15.9496 13.0311C15.8406 12.7679 15.8121 12.4784 15.8677 12.1991C15.9232 11.9197 16.0604 11.6632 16.2618 11.4618C16.4632 11.2604 16.7197 11.1232 16.9991 11.0677C17.2784 11.0121 17.5679 11.0406 17.8311 11.1496C18.0942 11.2586 18.3191 11.4432 18.4773 11.68C18.6355 11.9168 18.72 12.1952 18.72 12.48C18.72 12.8619 18.5683 13.2282 18.2982 13.4982C18.0282 13.7683 17.6619 13.92 17.28 13.92Z" fill="black"/>
                        </svg>
                        <span>
                            {{__('landingpage.community_reviews')}}
                        </span>
                    </p>

                    <div class="reviews-details d-flex align-items-center flex-wrap">
                        <div class="reviews-details-left d-flex align-items-end">
                            <span class="inner-left-side-count"> {{ round($serviceData['service_detail']['total_rating'],1) }}/5 </span>
                            <span class="inner-right-side-section d-flex flex-column">
                                <span class="inner-right-side-section-title">
                                    <span class="rateit-demo bigstars" data-rateit-value="{{ round($serviceData['service_detail']['total_rating'],1) }}"></span>
                                </span>
                                <span class="inner-right-side-section-description">{{__('landingpage.for')}} {{count($total_ratings)}} {{__('landingpage.user_feedback')}}</span>
                            </span>
                        </div>
                        <div class="section-horizontal-divider"></div>
                        <div class="reviews-details-right d-flex align-items-end">
                            <span class="inner-left-side-count"> 28 </span>
                            <span class="inner-right-side-section d-flex flex-column">
                                <span class="inner-right-side-section-title">{{__('landingpage.people_in_total')}}</span>
                                <span class="inner-right-side-section-description">{{__('landingpage.have_benefited_from_this_service')}}</span>
                            </span>
                        </div>
                    </div>


                    <div class="comments-container">
                        <div class="d-flex justify-content-between">
                            <p class="comments-count-title"> {{count($total_ratings)}} {{__('landingpage.comments')}} </p>
                            @if(count($total_ratings)!== 0)
                                <a href="{{route('rating.all', ['service_id' => $serviceData['service_detail']['id']])}}" class="view-all-comments-link">
                                    {{__('messages.view_all')}}
                                </a>
                            @endif
                        </div>

                        <ul class="comment-list list-inline m-0">
                        @php
                            $indexCount = 1
                        @endphp
                            @foreach($serviceData['rating_data'] as $ratingData)
                                @if($indexCount < 3)
                                <li class="comment">
                                    <div class="comment-box d-flex align-items-start">
                                        <img src="{{ $ratingData['profile_image'] }}" class="" alt="comment-user" />
                                        <div class="">
                                            <p class="comments-user-name">{{ $ratingData['customer_name'] }}</p>
                                            <p class="comments-paragraph mb-0"> {{ $ratingData['review'] }} </p>
                                        </div>
                                    </div>
                                </li>
                                @endif
                            @php
                                $indexCount++;
                            @endphp

                            @endforeach

                        </ul>
                    </div>
                </div>
                            <div class="section-divider"></div>

            @endif


            <div class="service-provider-detail-section">
                <p class="service-provider-detail-section-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 0C8.81847 0.00349392 5.76826 1.2689 3.51858 3.51858C1.2689 5.76826 0.00349392 8.81847 0 12V22.08C0 22.5892 0.202285 23.0776 0.562355 23.4376C0.922425 23.7977 1.41078 24 1.92 24H12C15.1826 24 18.2348 22.7357 20.4853 20.4853C22.7357 18.2348 24 15.1826 24 12C24 8.8174 22.7357 5.76515 20.4853 3.51472C18.2348 1.26428 15.1826 0 12 0ZM6.72 13.92C6.43519 13.92 6.15679 13.8355 5.91998 13.6773C5.68317 13.5191 5.4986 13.2942 5.38961 13.0311C5.28062 12.7679 5.25211 12.4784 5.30767 12.1991C5.36323 11.9197 5.50038 11.6632 5.70177 11.4618C5.90315 11.2604 6.15974 11.1232 6.43907 11.0677C6.7184 11.0121 7.00794 11.0406 7.27106 11.1496C7.53419 11.2586 7.75909 11.4432 7.91732 11.68C8.07555 11.9168 8.16 12.1952 8.16 12.48C8.16 12.8619 8.00829 13.2282 7.73823 13.4982C7.46818 13.7683 7.10191 13.92 6.72 13.92ZM12 13.92C11.7152 13.92 11.4368 13.8355 11.2 13.6773C10.9632 13.5191 10.7786 13.2942 10.6696 13.0311C10.5606 12.7679 10.5321 12.4784 10.5877 12.1991C10.6432 11.9197 10.7804 11.6632 10.9818 11.4618C11.1832 11.2604 11.4397 11.1232 11.7191 11.0677C11.9984 11.0121 12.2879 11.0406 12.5511 11.1496C12.8142 11.2586 13.0391 11.4432 13.1973 11.68C13.3555 11.9168 13.44 12.1952 13.44 12.48C13.44 12.8619 13.2883 13.2282 13.0182 13.4982C12.7482 13.7683 12.3819 13.92 12 13.92ZM17.28 13.92C16.9952 13.92 16.7168 13.8355 16.48 13.6773C16.2432 13.5191 16.0586 13.2942 15.9496 13.0311C15.8406 12.7679 15.8121 12.4784 15.8677 12.1991C15.9232 11.9197 16.0604 11.6632 16.2618 11.4618C16.4632 11.2604 16.7197 11.1232 16.9991 11.0677C17.2784 11.0121 17.5679 11.0406 17.8311 11.1496C18.0942 11.2586 18.3191 11.4432 18.4773 11.68C18.6355 11.9168 18.72 12.1952 18.72 12.48C18.72 12.8619 18.5683 13.2282 18.2982 13.4982C18.0282 13.7683 17.6619 13.92 17.28 13.92Z" fill="black"/>
                    </svg>
                    <span>
                        {{__('landingpage.about_provider')}}
                    </span>
                </p>

                <div class="provider-detail-box">
                    <img src="{{ $serviceData['provider']['profile_image'] }}" alt="provider-user" class="provider-avatar" />
                    <p class="provider-name mb-0">
                        <a href="{{ route('provider.detail', $serviceData['provider']['id']) }}">
                            {{ $serviceData['provider']['display_name'] }}
                        </a>
                    </p>
                    <p class="provider-speciality">
                        {{__('landingpage.comments')}}.
                    </p>
                    <p class="provider-description">
                        {{ $serviceData['provider']['description'] }}
                    </p>
                </div>

                <div class="provider-metadata d-flex flex-wrap">
                    <div class="provider-metadata-box">
                        <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.6882 7.45592C17.6882 7.22758 17.7559 7.00437 17.8828 6.81452C18.0096 6.62466 18.1899 6.47669 18.4009 6.38931C18.6119 6.30193 18.844 6.27906 19.0679 6.32361C19.2919 6.36816 19.4976 6.47811 19.659 6.63957C19.8205 6.80103 19.9304 7.00674 19.975 7.23069C20.0195 7.45464 19.9967 7.68677 19.9093 7.89772C19.8219 8.10868 19.6739 8.28898 19.4841 8.41584C19.2942 8.5427 19.071 8.61041 18.8427 8.61041C18.5365 8.61041 18.2429 8.48877 18.0264 8.27226C17.8099 8.05576 17.6882 7.76211 17.6882 7.45592ZM16.5337 5.14694C16.7621 5.14694 16.9853 5.07923 17.1751 4.95237C17.365 4.82552 17.513 4.64521 17.6003 4.43425C17.6877 4.2233 17.7106 3.99117 17.666 3.76722C17.6215 3.54327 17.5115 3.33756 17.3501 3.1761C17.1886 3.01464 16.9829 2.90469 16.759 2.86014C16.535 2.8156 16.3029 2.83846 16.0919 2.92584C15.881 3.01322 15.7007 3.1612 15.5738 3.35105C15.447 3.5409 15.3793 3.76411 15.3793 3.99245C15.3793 4.29864 15.5009 4.59229 15.7174 4.8088C15.9339 5.02531 16.2276 5.14694 16.5337 5.14694ZM19.291 10.5346C19.0877 10.5178 18.886 10.5824 18.7303 10.7143C18.5746 10.8462 18.4777 11.0345 18.4608 11.2378C18.323 12.8469 17.7286 14.3831 16.7474 15.6657C15.7662 16.9484 14.4391 17.9241 12.9222 18.4781C11.4053 19.0321 9.76172 19.1413 8.18485 18.7929C6.60799 18.4445 5.16344 17.6529 4.02118 16.5113C2.87892 15.3698 2.08646 13.9257 1.73705 12.3491C1.38764 10.7724 1.49581 9.12874 2.04884 7.61148C2.60188 6.09421 3.57676 4.76646 4.85878 3.78446C6.1408 2.80246 7.67663 2.20705 9.28555 2.0683C9.38662 2.05996 9.48506 2.0318 9.57525 1.98541C9.66544 1.93903 9.74561 1.87534 9.81118 1.79797C9.87675 1.72061 9.92645 1.63108 9.95742 1.53451C9.98839 1.43794 10 1.33622 9.99171 1.23514C9.98337 1.13407 9.9552 1.03563 9.90882 0.945442C9.86244 0.855254 9.79875 0.775084 9.72138 0.709511C9.64402 0.643938 9.55449 0.594245 9.45792 0.56327C9.36136 0.532294 9.25963 0.520644 9.15856 0.528982C7.25754 0.692502 5.44278 1.39556 3.92776 2.55545C2.41274 3.71534 1.2605 5.28381 0.606608 7.07631C-0.0472882 8.86882 -0.17564 10.8108 0.236654 12.6738C0.648947 14.5367 1.58473 16.2432 2.93392 17.5924C4.2831 18.9416 5.98955 19.8774 7.85251 20.2897C9.71547 20.702 11.6574 20.5737 13.4499 19.9198C15.2424 19.2659 16.8108 18.1136 17.9707 16.5986C19.1306 15.0835 19.8337 13.2687 19.9972 11.3677C20.0059 11.2666 19.9945 11.1647 19.9636 11.068C19.9328 10.9713 19.8831 10.8816 19.8175 10.8042C19.7518 10.7267 19.6715 10.663 19.5812 10.6168C19.4908 10.5705 19.3922 10.5426 19.291 10.5346ZM9.99171 3.60762C11.3617 3.60762 12.7009 4.01388 13.8401 4.77502C14.9792 5.53616 15.867 6.618 16.3913 7.88373C16.9156 9.14946 17.0527 10.5422 16.7855 11.8859C16.5182 13.2296 15.8585 14.4639 14.8897 15.4326C13.921 16.4014 12.6868 17.0611 11.3431 17.3284C9.99939 17.5957 8.60663 17.4585 7.34091 16.9342C6.07519 16.4099 4.99336 15.5221 4.23223 14.383C3.4711 13.2438 3.06484 11.9046 3.06484 10.5346C3.06688 8.69804 3.79733 6.93733 5.09593 5.63872C6.39452 4.34011 8.15521 3.60966 9.99171 3.60762ZM9.22206 10.5346C9.22206 10.7387 9.30314 10.9344 9.44748 11.0788C9.59182 11.2231 9.78758 11.3042 9.99171 11.3042H14.6096C14.8137 11.3042 15.0095 11.2231 15.1538 11.0788C15.2982 10.9344 15.3793 10.7387 15.3793 10.5346C15.3793 10.3304 15.2982 10.1347 15.1538 9.99032C15.0095 9.84598 14.8137 9.7649 14.6096 9.7649H10.7614V5.9166C10.7614 5.71247 10.6803 5.51671 10.5359 5.37237C10.3916 5.22803 10.1958 5.14694 9.99171 5.14694C9.78758 5.14694 9.59182 5.22803 9.44748 5.37237C9.30314 5.51671 9.22206 5.71247 9.22206 5.9166V10.5346ZM13.0703 2.83796C13.2986 2.83796 13.5219 2.77025 13.7117 2.64339C13.9016 2.51654 14.0495 2.33623 14.1369 2.12528C14.2243 1.91432 14.2472 1.68219 14.2026 1.45824C14.1581 1.23429 14.0481 1.02858 13.8867 0.867124C13.7252 0.705666 13.5195 0.595712 13.2955 0.551165C13.0716 0.506619 12.8395 0.529482 12.6285 0.616862C12.4176 0.704243 12.2373 0.852217 12.1104 1.04207C11.9835 1.23193 11.9158 1.45513 11.9158 1.68347C11.9158 1.98966 12.0375 2.28331 12.254 2.49982C12.4705 2.71633 12.7641 2.83796 13.0703 2.83796Z" fill="black"/>
                        </svg>
                        <p class="mb-0 provider-metadata-box-title">
                            {{__('landingpage.member_since')}}
                        </p>
                        <p class="mb-0 provider-metadata-box-description">
                            {{ date("$date_time->date_format", strtotime($serviceData['provider']['created_at'])) }}
                        </p>
                    </div>
                    <div class="provider-metadata-box">
                        <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16.5523 12.2485C16.5541 12.5296 16.4687 12.8044 16.3078 13.035C16.147 13.2656 15.9186 13.4407 15.6542 13.5362L11.2084 15.179L9.57079 19.6282C9.47381 19.8917 9.29835 20.119 9.06809 20.2796C8.83782 20.4403 8.56383 20.5264 8.28309 20.5264C8.00234 20.5264 7.72835 20.4403 7.49809 20.2796C7.26782 20.119 7.09236 19.8917 6.99538 19.6282L5.3474 15.179L0.898175 13.5413C0.634712 13.4443 0.407335 13.2689 0.246725 13.0386C0.0861147 12.8084 0 12.5344 0 12.2536C0 11.9729 0.0861147 11.6989 0.246725 11.4686C0.407335 11.2384 0.634712 11.0629 0.898175 10.9659L5.3474 9.31793L6.98504 4.86871C7.08202 4.60525 7.25748 4.37787 7.48774 4.21726C7.71801 4.05665 7.992 3.97054 8.27275 3.97054C8.55349 3.97054 8.82748 4.05665 9.05775 4.21726C9.28801 4.37787 9.46347 4.60525 9.56045 4.86871L11.2084 9.31793L15.6577 10.9556C15.9223 11.0519 16.1505 11.2281 16.3107 11.4596C16.471 11.6912 16.5554 11.9668 16.5523 12.2485ZM11.7256 3.97404H13.1047V5.35311C13.1047 5.53598 13.1773 5.71137 13.3066 5.84068C13.4359 5.97 13.6113 6.04264 13.7942 6.04264C13.9771 6.04264 14.1525 5.97 14.2818 5.84068C14.4111 5.71137 14.4837 5.53598 14.4837 5.35311V3.97404H15.8628C16.0457 3.97404 16.2211 3.90139 16.3504 3.77208C16.4797 3.64277 16.5523 3.46738 16.5523 3.2845C16.5523 3.10163 16.4797 2.92624 16.3504 2.79693C16.2211 2.66762 16.0457 2.59497 15.8628 2.59497H14.4837V1.2159C14.4837 1.03303 14.4111 0.85764 14.2818 0.728327C14.1525 0.599014 13.9771 0.526367 13.7942 0.526367C13.6113 0.526367 13.4359 0.599014 13.3066 0.728327C13.1773 0.85764 13.1047 1.03303 13.1047 1.2159V2.59497H11.7256C11.5427 2.59497 11.3673 2.66762 11.238 2.79693C11.1087 2.92624 11.0361 3.10163 11.0361 3.2845C11.0361 3.46738 11.1087 3.64277 11.238 3.77208C11.3673 3.90139 11.5427 3.97404 11.7256 3.97404ZM19.3105 6.73218H18.6209V6.04264C18.6209 5.85977 18.5483 5.68438 18.419 5.55507C18.2897 5.42576 18.1143 5.35311 17.9314 5.35311C17.7485 5.35311 17.5731 5.42576 17.4438 5.55507C17.3145 5.68438 17.2419 5.85977 17.2419 6.04264V6.73218H16.5523C16.3695 6.73218 16.1941 6.80482 16.0648 6.93414C15.9354 7.06345 15.8628 7.23883 15.8628 7.42171C15.8628 7.60459 15.9354 7.77997 16.0648 7.90929C16.1941 8.0386 16.3695 8.11125 16.5523 8.11125H17.2419V8.80078C17.2419 8.98366 17.3145 9.15904 17.4438 9.28835C17.5731 9.41767 17.7485 9.49031 17.9314 9.49031C18.1143 9.49031 18.2897 9.41767 18.419 9.28835C18.5483 9.15904 18.6209 8.98366 18.6209 8.80078V8.11125H19.3105C19.4933 8.11125 19.6687 8.0386 19.798 7.90929C19.9274 7.77997 20 7.60459 20 7.42171C20 7.23883 19.9274 7.06345 19.798 6.93414C19.6687 6.80482 19.4933 6.73218 19.3105 6.73218Z" fill="black"/>
</svg>

                        <p class="mb-0 provider-metadata-box-title">
                            {{__('landingpage.completed_projects')}}
                        </p>
                         @php
                            $completed_services = App\Models\Booking::where('provider_id', $serviceData['provider']['id'])->where('status', 'completed')->count();
                        @endphp
                        <p class="mb-0 provider-metadata-box-description">
                            {{ $completed_services }}
                        </p>
                    </div>
                    @php
                        $knownLanguageArray = json_decode($serviceData['provider']['known_languages'], true);
                    @endphp
                        @if(!empty($knownLanguageArray))

                    <div class="provider-metadata-box">
                       <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16.5523 12.2485C16.5541 12.5296 16.4687 12.8044 16.3078 13.035C16.147 13.2656 15.9186 13.4407 15.6542 13.5362L11.2084 15.179L9.57079 19.6282C9.47381 19.8917 9.29835 20.119 9.06809 20.2796C8.83782 20.4403 8.56383 20.5264 8.28309 20.5264C8.00234 20.5264 7.72835 20.4403 7.49809 20.2796C7.26782 20.119 7.09236 19.8917 6.99538 19.6282L5.3474 15.179L0.898175 13.5413C0.634712 13.4443 0.407335 13.2689 0.246725 13.0386C0.0861147 12.8084 0 12.5344 0 12.2536C0 11.9729 0.0861147 11.6989 0.246725 11.4686C0.407335 11.2384 0.634712 11.0629 0.898175 10.9659L5.3474 9.31793L6.98504 4.86871C7.08202 4.60525 7.25748 4.37787 7.48774 4.21726C7.71801 4.05665 7.992 3.97054 8.27275 3.97054C8.55349 3.97054 8.82748 4.05665 9.05775 4.21726C9.28801 4.37787 9.46347 4.60525 9.56045 4.86871L11.2084 9.31793L15.6577 10.9556C15.9223 11.0519 16.1505 11.2281 16.3107 11.4596C16.471 11.6912 16.5554 11.9668 16.5523 12.2485ZM11.7256 3.97404H13.1047V5.35311C13.1047 5.53598 13.1773 5.71137 13.3066 5.84068C13.4359 5.97 13.6113 6.04264 13.7942 6.04264C13.9771 6.04264 14.1525 5.97 14.2818 5.84068C14.4111 5.71137 14.4837 5.53598 14.4837 5.35311V3.97404H15.8628C16.0457 3.97404 16.2211 3.90139 16.3504 3.77208C16.4797 3.64277 16.5523 3.46738 16.5523 3.2845C16.5523 3.10163 16.4797 2.92624 16.3504 2.79693C16.2211 2.66762 16.0457 2.59497 15.8628 2.59497H14.4837V1.2159C14.4837 1.03303 14.4111 0.85764 14.2818 0.728327C14.1525 0.599014 13.9771 0.526367 13.7942 0.526367C13.6113 0.526367 13.4359 0.599014 13.3066 0.728327C13.1773 0.85764 13.1047 1.03303 13.1047 1.2159V2.59497H11.7256C11.5427 2.59497 11.3673 2.66762 11.238 2.79693C11.1087 2.92624 11.0361 3.10163 11.0361 3.2845C11.0361 3.46738 11.1087 3.64277 11.238 3.77208C11.3673 3.90139 11.5427 3.97404 11.7256 3.97404ZM19.3105 6.73218H18.6209V6.04264C18.6209 5.85977 18.5483 5.68438 18.419 5.55507C18.2897 5.42576 18.1143 5.35311 17.9314 5.35311C17.7485 5.35311 17.5731 5.42576 17.4438 5.55507C17.3145 5.68438 17.2419 5.85977 17.2419 6.04264V6.73218H16.5523C16.3695 6.73218 16.1941 6.80482 16.0648 6.93414C15.9354 7.06345 15.8628 7.23883 15.8628 7.42171C15.8628 7.60459 15.9354 7.77997 16.0648 7.90929C16.1941 8.0386 16.3695 8.11125 16.5523 8.11125H17.2419V8.80078C17.2419 8.98366 17.3145 9.15904 17.4438 9.28835C17.5731 9.41767 17.7485 9.49031 17.9314 9.49031C18.1143 9.49031 18.2897 9.41767 18.419 9.28835C18.5483 9.15904 18.6209 8.98366 18.6209 8.80078V8.11125H19.3105C19.4933 8.11125 19.6687 8.0386 19.798 7.90929C19.9274 7.77997 20 7.60459 20 7.42171C20 7.23883 19.9274 7.06345 19.798 6.93414C19.6687 6.80482 19.4933 6.73218 19.3105 6.73218Z" fill="black"/>
</svg>

                        <p class="mb-0 provider-metadata-box-title">
                            {{__('landingpage.languages')}}
                        </p>
                        <p class="mb-0 provider-metadata-box-description">
                            {{ implode(', ', $knownLanguageArray) }}
                        </p>
                    </div>
                            @endif

                </div>
            </div>
        </div>
    </div>

    <div class="row related-service-section">
        <div class="col-lg-12">
            @php
                if(!empty(auth()->user()) && auth()->user()->hasRole('user')){
                    $auth_user_id=auth()->user()->id;
                    $favourite = App\Models\UserFavouriteService::where('user_id',$auth_user_id)->get();
                }
                else{
                    $auth_user_id=null;
                    $favourite=null;
                }
            @endphp
            <div class="">
                <div class="d-flex align-items-center justify-content-between gap-3 flex-wrap">
                    <h5 class="related-service-section-title">{{__('landingpage.related_services')}}</h5>
                    <a href="{{route('service.list', ['category_id' => $serviceData['service_detail']['category_id']])}}" class="view-more-link">{{__('messages.view_all')}}</a>
                    <!-- <a href="{{route('related.service', ['id' => $serviceData['service_detail']['id']])}}">{{__('messages.view_all')}}</a> -->
                </div>
                <div class="position-relative overflow-hidden swiper swiper-general our-service related-services-swiper" data-slide="4"
                    data-laptop="4" data-tab="4" data-mobile="1" data-mobile-sm="1" data-autoplay="true"
                    data-loop="true" data-navigation="false" data-pagination="false">
                    <!-- <landing-servicedetailsection-section :category_id="{{ $serviceData['service_detail']['category_id'] }}"></landing-servicedetailsection-section> -->
                    <landing-servicedetailsection-section :service="{{ json_encode($serviceData['related_service']) }}" :user_id="{{json_encode($auth_user_id)}}" :favourite="{{json_encode($favourite)}}"></landing-servicedetailsection-section>
                </div>
            </div>
        </div>
    </div>
</div>


@endsection

@section('after_script')
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.1/dist/sweetalert2.all.min.js"></script>
<script src="{{ asset('vendor/star-rating/jquery.rateit.js') }}"></script>
<script>

    $('.rateit-demo').rateit({
        readonly:true,
        min: 0,
        max: 5,
        step: 0.5,
        mode:'font'
    });

    $(document).ready(function() {
        $('.service-addon-checkbox').on('change', function() {
            updateContinueButtonHref();
        });

        function updateContinueButtonHref() {
            var selectedAddonIds = $('.service-addon-checkbox:checked').map(function() {
                return $(this).data('addon-id');
            }).get();

            var baseUrl = `{{ route('book.service', ['id' => $serviceData['service_detail']['id']]) }}`;

            var updatedHref = baseUrl + '&addons=' + selectedAddonIds.join(',');

            $('.continue-button').attr('href', updatedHref);
        }
        const baseUrl = document.querySelector('meta[name="baseUrl"]').getAttribute('content');
    $('.save_fav').off('click').on('click', function () {

       const form = $(this).closest('form');

       const serviceId = form.find('.service_id').data('service-id');
       const userId = $('#user_id').val();

       $.ajax({
            url: baseUrl + '/api/save-favourite',
            type: 'POST',
            data: {
                _token: '{{ csrf_token() }}',
                service_id: serviceId,
                user_id: userId,
            },
            success: function (response) {
               Swal.fire({
               title: 'Done',
               text: response.message,
               icon: 'success',
               iconColor: '#5F60B9'
               }).then((result) => {
                  if (result.isConfirmed) {
                     window.location.reload();
                  }
               })
            },
            error: function (error) {
                console.error('Error:', error);
            }
        });
    });

    $('.delete_fav').off('click').on('click', function () {
       const form = $(this).closest('form');

       const serviceId = form.find('.service_id').data('service-id');
       const userId = $('#user_id').val();

       $.ajax({
            url: baseUrl + '/api/delete-favourite',
            type: 'POST',
            data: {
                _token: '{{ csrf_token() }}',
                service_id: serviceId,
                user_id: userId,
            },
            success: function (response) {
               Swal.fire({
               title: 'Done',
               text: response.message,
               icon: 'success',
               iconColor: '#5F60B9'
               }).then((result) => {
                  if (result.isConfirmed) {
                     window.location.reload();
                  }
               })
            },
            error: function (error) {
                console.error('Error', error);
            }
        });
    });
    });

    document.addEventListener("DOMContentLoaded", function() {
        var description = document.querySelector('.readmore-text');
        var readmoreBtn = document.querySelector('.readmore-btn');

        if (description.offsetHeight < description.scrollHeight) {
            readmoreBtn.style.display = 'block';
        } else {
            readmoreBtn.style.display = 'none';
        }
    });

   
</script>

@endsection